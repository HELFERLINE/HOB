.statebar {
    width: 100vw;
}

.stepper-wrapper {
    display: flex;
    justify-content: space-between;
    margin: 50px auto 70px;
    width: 75%;
}

.stepper-item {
    position: relative;
    display: flex;
    flex-direction: column;
    align-items: center;
    flex: 1;
    padding: 0px;
    gap: 4px;

}
.stepper-item::before {
    position: absolute;
    content: "";
    border-bottom: 2px solid #F3F3F5;
    width: 100%;
    top: 20px;
    left: -50%;
    z-index: 2;
}

.stepper-item::after {
    position: absolute;
    content: "";
    border-bottom: 2px solid #F3F3F5;
    width: 100%;
    top: 20px;
    left: 50%;
    z-index: 2;
}

.stepper-item .step-counter {
    box-sizing: border-box;
    display: flex;
    flex-direction: row;
    align-items: center;
    padding: 12px;
    gap: 10px;
    width: 48px;
    height: 48px;
    border: 2px solid #F3F3F5;
    border-radius: 24px;
    z-index: 4;
    background-color: #fff;
    outline: 6px solid white;
    transition: border 0.5s ease-in-out;
}

.stepper-item.active .step-counter {
    border: 2px solid #1F516C;
    transition: border 0.3s ease;
}

/* Line before the active step (coming from previous step) */
.stepper-item.active::before {
    position: absolute;
    content: "";
    border-bottom: 2px solid #1F516C;
    width: 0%;
    top: 20px;
    left: -50%;
    z-index: 3;
    animation: progress-line 0.5s forwards;
}

/* Line after the active step (going to next step) */
.stepper-item.active::after {
    position: absolute;
    content: "";
    border-bottom: 2px solid #1F516C;
    width: 0%;
    top: 20px;
    left: 50%;
    z-index: 3;
    animation: progress-line-half 0.5s forwards;
    animation-delay: 0.6s;
}

.stepper-item.completed .step-counter {
    border: 2px solid #1F516C;
    transition: border 0.3s ease;
}

/* Line before completed step */
.stepper-item.completed::before {
    position: absolute;
    content: "";
    border-bottom: 2px solid #1F516C;
    width: 100%;
    top: 20px;
    left: -50%;
    z-index: 3;
}

/* Line after completed step */
.stepper-item.completed::after {
    position: absolute;
    content: "";
    border-bottom: 2px solid #1F516C;
    width: 100%;
    top: 20px;
    left: 50%;
    z-index: 3;
}

/* Full line animation */
@keyframes progress-line {
    0% { width: 0%; }
    100% { width: 100%; }
}

/* Half line animation */
@keyframes progress-line-half {
    0% { width: 0%; }
    100% { width: 50%; }
}

/* Remove unnecessary animation */
@keyframes progress-line-left-complete {
    0% { width: 0%; }
    100% { width: 100%; }
}

/* SVG fill animation */
.stepper-item .step-counter svg {
    width: 24px;
    height: 24px;
    fill: #F3F3F5;
    transition: fill 0.3s ease-in-out;
}

.stepper-item.active .step-counter svg {
    fill: #1F516C;
    transition: fill 0.3s ease-in-out;
    transition-delay: 0.3s;
}

.stepper-item.completed .step-counter svg {
    fill: #1F516C;
}

.stepper-item:first-child::before {
    content: none;
}

.stepper-item:last-child::after {
    content: none;
}


/* Add this to handle the animation from active to completed */
.stepper-item.transition-to-complete::after {
    position: absolute;
    content: "";
    border-bottom: 2px solid #1F516C;
    width: 50%; /* Starting from half width */
    top: 20px;
    left: 50%;
    z-index: 3;
    animation: progress-half-to-full 0.5s forwards;
}

/* Add this keyframe animation */
@keyframes progress-half-to-full {
    0% { width: 50%; }
    100% { width: 100%; }
}

/* Modify your existing JavaScript to add/remove this class during transitions */

/* Responsive styles for mobile devices */
@media screen and (max-width: 768px) {
    .stepper-wrapper {
        width: 90%;
        margin: 30px auto 50px;
    }
    
    .stepper-item {
        gap: 2px;
    }
    
    .stepper-item .step-counter {
        padding: 8px;
        width: 36px;
        height: 36px;
        outline: 4px solid white;
    }
    
    .stepper-item .step-counter svg {
        width: 20px;
        height: 20px;
    }
    
    .stepper-item::before,
    .stepper-item::after,
    .stepper-item.active::before,
    .stepper-item.active::after,
    .stepper-item.completed::before,
    .stepper-item.completed::after,
    .stepper-item.transition-to-complete::after {
        top: 16px;
    }
}

@media screen and (max-width: 480px) {
    .stepper-wrapper {
        width: 95%;
        margin: 20px auto 40px;
    }
    
    .stepper-item .step-counter {
        padding: 6px;
        width: 30px;
        height: 30px;
        outline: 3px solid white;
    }
    
    .stepper-item .step-counter svg {
        width: 18px;
        height: 18px;
    }
    
    .stepper-item::before,
    .stepper-item::after,
    .stepper-item.active::before,
    .stepper-item.active::after,
    .stepper-item.completed::before,
    .stepper-item.completed::after,
    .stepper-item.transition-to-complete::after {
        top: 13px;
    }
}