<div class="appointment">
  <h1 class="data-title">Mögliche Termine wählen</h1>
  

  @if (this.formSubmitted === false) {
  <div class="data-container">

    <form [formGroup]="appointmentForm" (ngSubmit)="validateContactDetails()">
      <div class="address-row">
        <div class="address-container">
          <p class="address-title">
            Telefonnummer
            <svg
              width="6"
              height="6"
              viewBox="0 0 6 6"
              fill="none"
              xmlns="http://www.w3.org/2000/svg"
            >
              <path
                d="M1.84 5.53599L2.048 3.80799L1.024 4.57599C0.938667 4.65066 0.853333 4.68799 0.768 4.68799C0.650667 4.68799 0.554667 4.61866 0.48 4.47999L0 3.67999L1.552 3.00799L0.384 2.49599C0.224 2.41066 0.144 2.30399 0.144 2.17599C0.144 2.10132 0.165333 2.02666 0.208 1.95199L0.704 1.16799L2.048 2.19199L1.888 0.879989C1.86667 0.741323 1.888 0.639989 1.952 0.575989C2.016 0.501322 2.11733 0.463989 2.256 0.463989H3.264L3.072 2.19199L4.08 1.40799C4.15467 1.33332 4.23467 1.29599 4.32 1.29599C4.43733 1.29599 4.53867 1.36532 4.624 1.50399L5.12 2.31999L3.552 3.00799L4.736 3.51999C4.896 3.59466 4.976 3.70132 4.976 3.83999C4.976 3.90399 4.95467 3.97332 4.912 4.04799L4.4 4.83199L3.072 3.80799L3.216 5.11999C3.22667 5.25866 3.2 5.36532 3.136 5.43999C3.072 5.50399 2.976 5.53599 2.848 5.53599H1.84Z"
                fill="#F65D7C"
              />
            </svg>
          </p>
          <input
            class="address-input"
            type="tel"
            formControlName="phoneNumber"
            placeholder="+49 176 XXX XX XX"
            [class.invalid]="
              appointmentForm.get('phoneNumber')?.invalid && formSubmitted
            "
          />
          @if (appointmentForm.get('phoneNumber')?.invalid && formSubmitted) {
          <p class="error-message">
            @if (appointmentForm.get('phoneNumber')?.errors?.['required']) {
                Bitte gib deine Telefonnummer ein 
            } @else if (appointmentForm.get('phoneNumber')?.errors?.['pattern']) { 
                Bitte gib eine gültige Telefonnummer ein (Format: + gefolgt von Ländervorwahl und Rufnummer oder 0 gefolgt von Ziffern)
            }
          </p>
          }
        </div>
        <div class="address-container">
          <p class="address-title">
            E-Mail-Adresse
            <svg
              width="6"
              height="6"
              viewBox="0 0 6 6"
              fill="none"
              xmlns="http://www.w3.org/2000/svg"
            >
              <path
                d="M1.84 5.53599L2.048 3.80799L1.024 4.57599C0.938667 4.65066 0.853333 4.68799 0.768 4.68799C0.650667 4.68799 0.554667 4.61866 0.48 4.47999L0 3.67999L1.552 3.00799L0.384 2.49599C0.224 2.41066 0.144 2.30399 0.144 2.17599C0.144 2.10132 0.165333 2.02666 0.208 1.95199L0.704 1.16799L2.048 2.19199L1.888 0.879989C1.86667 0.741323 1.888 0.639989 1.952 0.575989C2.016 0.501322 2.11733 0.463989 2.256 0.463989H3.264L3.072 2.19199L4.08 1.40799C4.15467 1.33332 4.23467 1.29599 4.32 1.29599C4.43733 1.29599 4.53867 1.36532 4.624 1.50399L5.12 2.31999L3.552 3.00799L4.736 3.51999C4.896 3.59466 4.976 3.70132 4.976 3.83999C4.976 3.90399 4.95467 3.97332 4.912 4.04799L4.4 4.83199L3.072 3.80799L3.216 5.11999C3.22667 5.25866 3.2 5.36532 3.136 5.43999C3.072 5.50399 2.976 5.53599 2.848 5.53599H1.84Z"
                fill="#F65D7C"
              />
            </svg>
          </p>
          <input
            class="address-input"
            type="email"
            formControlName="email"
            placeholder="beispiel@mail.de"
            [class.invalid]="
              appointmentForm.get('email')?.invalid && formSubmitted
            "
          />
          @if (appointmentForm.get('email')?.invalid && formSubmitted) {
          <p class="error-message">
            @if (appointmentForm.get('email')?.errors?.['required']) { 
                Bitte gib Deine E-Mail-Adresse ein
            } @else if (appointmentForm.get('email')?.errors?.['email']) { 
              Bitte gib eine gültige E-Mail-Adresse ein
            }
          </p>
          }
        </div>
      </div>
    </form>

    <p class="info-text">
        Die von Dir eingegebenen Daten werden ausschließlich für die Bearbeitung der Buchung des Installationsservice (Art. 6 Abs. 1 b) DSGVO) verwendet.
    </p>
ç
    <div class="cta">
      <button class="btn-back" (click)="goBack()">
        <svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">
          <path fill-rule="evenodd" clip-rule="evenodd" d="M13.6754 3.62063C13.9073 3.9082 13.8841 4.30902 13.6059 4.57393L7.646 10.25L13.6059 15.9262C13.9094 16.2151 13.9094 16.6659 13.6059 16.9549C13.4618 17.0922 13.2759 17.1667 13.0835 17.1667C12.8911 17.1667 12.7052 17.0922 12.5611 16.9549L6.06108 10.7644C5.75763 10.4754 5.75763 10.0247 6.06108 9.73567L12.5611 3.5452C12.8576 3.26277 13.3094 3.26277 13.6059 3.5452L13.6754 3.62063Z" fill="#1F516C"/>
        </svg>
        <span>Zurück</span>
      </button>
      <button
        class="btn-next"
        (click)="goForward()"
        [disabled]="
          formSubmitted &&
          (!appointmentForm.get('phoneNumber')?.valid ||
            !appointmentForm.get('email')?.valid)
        "
      >
        <span>Weiter</span>
      </button>
    </div>

  </div>
  } @else { @if (this.booking.selectedService === serviceOptions.remoteService)
  {
  <div class="appointment-container">
    <app-cal-embed></app-cal-embed>
  </div>
  } @else {
  <div class="appointment-container">

    <div class="info-section">
      <h3 class="info-title">
        Bitte gib mindestens drei Zeitfenster an drei verschiedenen Tagen an.
      </h3>
      <p class="info-text">
        Je mehr Vorschläge und längere Zeiträume du angibst, desto schneller
        finden wir einen Experten für dich.
      </p>
    </div>

    <form [formGroup]="appointmentForm">
      <div class="appointment-select-container" formArrayName="appointments">
        @for (control of appointmentsArray.controls; track control; let i =
        $index) {
        <div [formGroupName]="i">
          <div class="appointment-header">
            <h2 class="appointment-select-title">
              {{ i + 1 }}. Terminvorschlag
            </h2>
            @if (i >= 3 && appointmentsArray.length > 3) {
            <div class="remove-appointment" (click)="removeAppointment(i)">
              <svg
                width="24"
                height="24"
                viewBox="0 0 24 24"
                fill="none"
                xmlns="http://www.w3.org/2000/svg"
              >
                <path
                  fill-rule="evenodd"
                  clip-rule="evenodd"
                  d="M13.1797 1.00439C14.4777 1.00439 15.5381 2.06039 15.5381 3.36279V3.75439H21.8257C22.2525 3.75439 22.5957 4.10199 22.5957 4.53759C22.5957 4.97319 22.2481 5.32079 21.8125 5.32079H20.2461V20.6416C20.2461 21.9396 19.1901 23 17.8877 23H6.10448C4.80648 23 3.74608 21.944 3.74608 20.6416V5.32079H2.17968C1.74408 5.32079 1.39648 4.97759 1.39648 4.53759C1.39648 4.09759 1.74408 3.75439 2.17968 3.75439H8.47168V3.36279C8.47168 2.06479 9.52768 1.00439 10.8213 1.00439H13.1797ZM18.6797 5.32079H5.32128V20.6416C5.32128 21.0684 5.66888 21.4248 6.10448 21.4248H17.9009C18.3277 21.4248 18.6841 21.0772 18.6841 20.6416L18.6797 5.32079ZM14.7549 6.89599C15.1905 6.89599 15.5381 7.2436 15.5381 7.67919V19.0708C15.5381 19.5064 15.1905 19.854 14.7549 19.854C14.3193 19.854 13.9717 19.5064 13.9717 19.0708V7.67919C13.9717 7.2436 14.3193 6.89599 14.7549 6.89599ZM9.25048 6.89599C9.68608 6.89599 10.0337 7.2436 10.0337 7.67919V19.0708C10.0337 19.5064 9.68608 19.854 9.25048 19.854C8.81488 19.854 8.46728 19.5064 8.46728 19.0708V7.67919C8.46728 7.2436 8.81488 6.89599 9.25048 6.89599ZM13.1753 2.57519H10.8169C10.3901 2.57519 10.0337 2.92279 10.0337 3.35839L10.0293 3.74999H13.9585V3.35839C13.9585 2.93159 13.6109 2.57519 13.1753 2.57519Z"
                  fill="#1F516C"
                />
              </svg>
              <span>Entfernen</span>
            </div>
            }
          </div>
          <div class="address-row">
            <div class="address-container">
              <p class="address-title">
                Datum
                <svg
                  width="6"
                  height="6"
                  viewBox="0 0 6 6"
                  fill="none"
                  xmlns="http://www.w3.org/2000/svg"
                >
                  <path
                    d="M1.84 5.53599L2.048 3.80799L1.024 4.57599C0.938667 4.65066 0.853333 4.68799 0.768 4.68799C0.650667 4.68799 0.554667 4.61866 0.48 4.47999L0 3.67999L1.552 3.00799L0.384 2.49599C0.224 2.41066 0.144 2.30399 0.144 2.17599C0.144 2.10132 0.165333 2.02666 0.208 1.95199L0.704 1.16799L2.048 2.19199L1.888 0.879989C1.86667 0.741323 1.888 0.639989 1.952 0.575989C2.016 0.501322 2.11733 0.463989 2.256 0.463989H3.264L3.072 2.19199L4.08 1.40799C4.15467 1.33332 4.23467 1.29599 4.32 1.29599C4.43733 1.29599 4.53867 1.36532 4.624 1.50399L5.12 2.31999L3.552 3.00799L4.736 3.51999C4.896 3.59466 4.976 3.70132 4.976 3.83999C4.976 3.90399 4.95467 3.97332 4.912 4.04799L4.4 4.83199L3.072 3.80799L3.216 5.11999C3.22667 5.25866 3.2 5.36532 3.136 5.43999C3.072 5.50399 2.976 5.53599 2.848 5.53599H1.84Z"
                    fill="#F65D7C"
                  />
                </svg>
              </p>
              <div class="input-with-icon">
                <input
                  type="date"
                  class="address-input"
                  formControlName="appointmentDate"
                  placeholder="TT.MM.JJJJ"
                  [min]="minValidDate"
                  [class.invalid]="
                    control.get('appointmentDate')?.invalid && formSubmitted
                  "
                />
                <svg
                  class="input-icon"
                  width="21"
                  height="20"
                  viewBox="0 0 21 20"
                  fill="none"
                  xmlns="http://www.w3.org/2000/svg"
                >
                  <path
                    fill-rule="evenodd"
                    clip-rule="evenodd"
                    d="M13.9343 0.833374C14.2937 0.833374 14.5907 1.12671 14.587 1.48971V2.79871H17.535C18.6167 2.79871 19.5003 3.68237 19.5003 4.76037V19.1667H1.16699V4.76037C1.16699 3.68237 2.05066 2.79871 3.13233 2.79871H6.07299V1.48971C6.07299 1.12671 6.36999 0.833374 6.72932 0.833374C7.09232 0.833374 7.38566 1.13037 7.38566 1.48971V2.79871H13.278V1.48971C13.278 1.12671 13.575 0.833374 13.9343 0.833374ZM18.1913 8.36471H2.47599V17.8577H18.1913V8.36471ZM8.17399 9.31437C9.38399 9.31437 10.3667 10.3264 10.3703 11.5364C10.3703 12.1597 10.1393 12.717 9.74699 13.1094C10.1393 13.5347 10.3703 14.092 10.3703 14.6824C10.3703 15.8924 9.38766 16.908 8.17766 16.908H7.58732C7.19133 16.908 6.40666 16.743 5.98132 16.4167C5.68432 16.1857 5.65133 15.7604 5.88233 15.467C6.11333 15.17 6.53866 15.137 6.83199 15.368C6.92732 15.434 7.35266 15.566 7.58366 15.566H8.17399C8.66532 15.566 9.02466 15.1737 9.02466 14.6824C9.02466 14.191 8.63232 13.7987 8.17399 13.7987H7.29032C6.89432 13.7987 6.60099 13.509 6.60099 13.113C6.60099 12.717 6.93099 12.4237 7.29032 12.4237H8.17033C8.66166 12.4237 9.02099 12.0314 9.02099 11.54C9.02099 11.0487 8.62866 10.6564 8.17033 10.6564H7.57999C7.37792 10.6564 7.0194 10.7607 6.87269 10.8302L6.82833 10.8544C6.53499 11.0487 6.10966 11.0157 5.87866 10.7224C5.65132 10.462 5.68433 10.033 5.97766 9.80571C6.40666 9.47937 7.19132 9.31437 7.58366 9.31437H8.17399ZM11.4483 10.2934L12.9517 9.44271C13.1497 9.31071 13.41 9.31071 13.608 9.44271C13.8023 9.54171 13.9343 9.77271 13.938 10V16.2224C13.938 16.5854 13.6447 16.8787 13.2817 16.8787C12.9187 16.8787 12.6253 16.5817 12.6253 16.2224V11.1147L12.101 11.408C11.8077 11.6024 11.3823 11.5034 11.2173 11.177C11.023 10.8837 11.122 10.4584 11.4483 10.2934ZM6.08032 4.10771H3.13233C2.76933 4.10771 2.47599 4.40104 2.47599 4.76404V7.05571H18.2023V4.76404C18.2023 4.40104 17.9053 4.10771 17.546 4.10771H14.598V5.41671C14.598 5.77971 14.3047 6.07304 13.9417 6.07304C13.5787 6.07304 13.2853 5.77604 13.2853 5.41671V4.10771H7.39299V5.41671C7.39299 5.77971 7.09599 6.07304 6.73666 6.07304C6.37366 6.07304 6.08032 5.77604 6.08032 5.41671V4.10771Z"
                    fill="#1F516C"
                  />
                </svg>
              </div>
              @if (control.get('appointmentDate')?.invalid && formSubmitted) {
              <p class="error-message">
                @if (control.get('appointmentDate')?.errors?.['required']) {
                    Bitte gib ein Datum an
                } @else if (control.get('appointmentDate')?.errors?.['pastDate']) { 
                    Das Datum darf nicht in der Vergangenheit liegen
                } @else if (control.get('appointmentDate')?.errors?.['beforeMinimumDays']) {
                    Das Datum muss mindestens 2 Tage in der Zukunft liegen
                }
              </p>
              }
            </div>
            <div class="address-container">
              <p class="address-title">
                Von (Uhrzeit)
                <svg
                  width="6"
                  height="6"
                  viewBox="0 0 6 6"
                  fill="none"
                  xmlns="http://www.w3.org/2000/svg"
                >
                  <path
                    d="M1.84 5.53599L2.048 3.80799L1.024 4.57599C0.938667 4.65066 0.853333 4.68799 0.768 4.68799C0.650667 4.68799 0.554667 4.61866 0.48 4.47999L0 3.67999L1.552 3.00799L0.384 2.49599C0.224 2.41066 0.144 2.30399 0.144 2.17599C0.144 2.10132 0.165333 2.02666 0.208 1.95199L0.704 1.16799L2.048 2.19199L1.888 0.879989C1.86667 0.741323 1.888 0.639989 1.952 0.575989C2.016 0.501322 2.11733 0.463989 2.256 0.463989H3.264L3.072 2.19199L4.08 1.40799C4.15467 1.33332 4.23467 1.29599 4.32 1.29599C4.43733 1.29599 4.53867 1.36532 4.624 1.50399L5.12 2.31999L3.552 3.00799L4.736 3.51999C4.896 3.59466 4.976 3.70132 4.976 3.83999C4.976 3.90399 4.95467 3.97332 4.912 4.04799L4.4 4.83199L3.072 3.80799L3.216 5.11999C3.22667 5.25866 3.2 5.36532 3.136 5.43999C3.072 5.50399 2.976 5.53599 2.848 5.53599H1.84Z"
                    fill="#F65D7C"
                  />
                </svg>
              </p>
              <div class="time-dropdown">
                <select
                  class="address-input"
                  formControlName="startTime"
                  [class.invalid]="
                    control.get('startTime')?.invalid && formSubmitted
                  "
                >
                  <option value="" disabled>Startzeit wählen</option>
                  @for (timeSlot of timeSlots; track timeSlot) {
                  <option [value]="timeSlot">{{ timeSlot }}</option>
                  }
                </select>
              </div>
              @if (control.get('startTime')?.invalid && formSubmitted) {
              <p class="error-message">
                @if (control.get('startTime')?.errors?.['required']) { 
                    Bitte gib eine Startzeit an
                } @else if (control.get('startTime')?.errors?.['outsideWorkingHours']) {
                    Die Startzeit muss zwischen 07:00 und 22:00 Uhr liegen
                }
              </p>
              }
            </div>
            <div class="address-container">
              <p class="address-title">
                Bis (Uhrzeit)
                <svg
                  width="6"
                  height="6"
                  viewBox="0 0 6 6"
                  fill="none"
                  xmlns="http://www.w3.org/2000/svg"
                >
                  <path
                    d="M1.84 5.53599L2.048 3.80799L1.024 4.57599C0.938667 4.65066 0.853333 4.68799 0.768 4.68799C0.650667 4.68799 0.554667 4.61866 0.48 4.47999L0 3.67999L1.552 3.00799L0.384 2.49599C0.224 2.41066 0.144 2.30399 0.144 2.17599C0.144 2.10132 0.165333 2.02666 0.208 1.95199L0.704 1.16799L2.048 2.19199L1.888 0.879989C1.86667 0.741323 1.888 0.639989 1.952 0.575989C2.016 0.501322 2.11733 0.463989 2.256 0.463989H3.264L3.072 2.19199L4.08 1.40799C4.15467 1.33332 4.23467 1.29599 4.32 1.29599C4.43733 1.29599 4.53867 1.36532 4.624 1.50399L5.12 2.31999L3.552 3.00799L4.736 3.51999C4.896 3.59466 4.976 3.70132 4.976 3.83999C4.976 3.90399 4.95467 3.97332 4.912 4.04799L4.4 4.83199L3.072 3.80799L3.216 5.11999C3.22667 5.25866 3.2 5.36532 3.136 5.43999C3.072 5.50399 2.976 5.53599 2.848 5.53599H1.84Z"
                    fill="#F65D7C"
                  />
                </svg>
              </p>
              <div class="time-dropdown">
                <select
                  class="address-input"
                  formControlName="endTime"
                  [class.invalid]="
                    control.get('endTime')?.invalid && formSubmitted
                  "
                >
                  <option value="" disabled>Endzeit wählen</option>
                  @for (timeSlot of timeSlots; track timeSlot) {
                  <option [value]="timeSlot">{{ timeSlot }}</option>
                  }
                </select>
              </div>
              @if (control.get('endTime')?.invalid && formSubmitted) {
              <p class="error-message">
                @if (control.get('endTime')?.errors?.['required']) { 
                  Bitte gib eine Endzeit an
                } @else if (control.get('endTime')?.errors?.['outsideWorkingHours']) { 
                  Die Endzeit muss zwischen 07:00 und 22:00 Uhr liegen
                }
              </p>
              }
            </div>
          </div>

          @if (hasTimeWindowError(i) || hasOverlapError(i) ||
          hasTimeRangeError(i)) {
          <p class="error-message">{{ getAppointmentErrorMessage(i) }}</p>
          }
        </div>
        }
      </div>
    </form>

    @if (canAddMoreAppointments()) {
    <div class="add-appointment" (click)="addAppointment()">
      <svg
        width="49"
        height="48"
        viewBox="0 0 49 48"
        fill="none"
        xmlns="http://www.w3.org/2000/svg"
      >
        <path
          fill-rule="evenodd"
          clip-rule="evenodd"
          d="M24.5 8C25.2953 8 25.94 8.64471 25.94 9.44L25.9384 22.56H39.06C39.8553 22.56 40.5 23.2047 40.5 24C40.5 24.7953 39.8553 25.44 39.06 25.44H25.9384L25.94 38.56C25.94 39.3553 25.2953 40 24.5 40C23.7047 40 23.06 39.3553 23.06 38.56L23.0584 25.44H9.94C9.14471 25.44 8.5 24.7953 8.5 24C8.5 23.2047 9.14471 22.56 9.94 22.56H23.0584L23.06 9.44C23.06 8.64471 23.7047 8 24.5 8Z"
          fill="#1F516C"
        />
      </svg>
      <h3 class="add-appointment-text">
        Weiteren Terminvorschlag hinzufügen (Optional)
      </h3>
    </div>
    }

    <div class="notification-container">
      <p class="notification-title">
        Wie sollen wir den Termin bestätigen?
        <svg
          width="6"
          height="6"
          viewBox="0 0 6 6"
          fill="none"
          xmlns="http://www.w3.org/2000/svg"
        >
          <path
            d="M1.84 5.53599L2.048 3.80799L1.024 4.57599C0.938667 4.65066 0.853333 4.68799 0.768 4.68799C0.650667 4.68799 0.554667 4.61866 0.48 4.47999L0 3.67999L1.552 3.00799L0.384 2.49599C0.224 2.41066 0.144 2.30399 0.144 2.17599C0.144 2.10132 0.165333 2.02666 0.208 1.95199L0.704 1.16799L2.048 2.19199L1.888 0.879989C1.86667 0.741323 1.888 0.639989 1.952 0.575989C2.016 0.501322 2.11733 0.463989 2.256 0.463989H3.264L3.072 2.19199L4.08 1.40799C4.15467 1.33332 4.23467 1.29599 4.32 1.29599C4.43733 1.29599 4.53867 1.36532 4.624 1.50399L5.12 2.31999L3.552 3.00799L4.736 3.51999C4.896 3.59466 4.976 3.70132 4.976 3.83999C4.976 3.90399 4.95467 3.97332 4.912 4.04799L4.4 4.83199L3.072 3.80799L3.216 5.11999C3.22667 5.25866 3.2 5.36532 3.136 5.43999C3.072 5.50399 2.976 5.53599 2.848 5.53599H1.84Z"
            fill="#F65D7C"
          />
        </svg>
      </p>
      
      <p class="notification-description">
        Nach der Buchung erhältst du in Kürze eine Benachrichtigung mit der
        exakten Uhrzeit.
      </p>

      <div [formGroup]="appointmentForm">
        <div class="card-container">
          <div class="card">
            <label for="sms-option" class="card-label">
              <div class="main-content">
                <div class="custom-radio">
                  <input
                    type="radio"
                    id="sms-option"
                    formControlName="notificationMethod"
                    value="sms"
                  />
                  <label for="sms-option" class="radio-label"></label>
                </div>
                <p class="text">Per SMS</p>
              </div>
            </label>
          </div>
          <div class="card">
            <label for="phone-option" class="card-label">
              <div class="main-content">
                <div class="custom-radio">
                  <input
                    type="radio"
                    id="phone-option"
                    formControlName="notificationMethod"
                    value="phone"
                  />
                  <label for="phone-option" class="radio-label"></label>
                </div>
                <p class="text">Per Anruf</p>
              </div>
            </label>
          </div>
        </div>

        @if (this.appointmentForm.get('notificationMethod')?.value === 'sms') {
        <div class="address-container">
          <p class="address-title">
            Mobilfunknummer
            <svg
              width="6"
              height="6"
              viewBox="0 0 6 6"
              fill="none"
              xmlns="http://www.w3.org/2000/svg"
            >
              <path
                d="M1.84 5.53599L2.048 3.80799L1.024 4.57599C0.938667 4.65066 0.853333 4.68799 0.768 4.68799C0.650667 4.68799 0.554667 4.61866 0.48 4.47999L0 3.67999L1.552 3.00799L0.384 2.49599C0.224 2.41066 0.144 2.30399 0.144 2.17599C0.144 2.10132 0.165333 2.02666 0.208 1.95199L0.704 1.16799L2.048 2.19199L1.888 0.879989C1.86667 0.741323 1.888 0.639989 1.952 0.575989C2.016 0.501322 2.11733 0.463989 2.256 0.463989H3.264L3.072 2.19199L4.08 1.40799C4.15467 1.33332 4.23467 1.29599 4.32 1.29599C4.43733 1.29599 4.53867 1.36532 4.624 1.50399L5.12 2.31999L3.552 3.00799L4.736 3.51999C4.896 3.59466 4.976 3.70132 4.976 3.83999C4.976 3.90399 4.95467 3.97332 4.912 4.04799L4.4 4.83199L3.072 3.80799L3.216 5.11999C3.22667 5.25866 3.2 5.36532 3.136 5.43999C3.072 5.50399 2.976 5.53599 2.848 5.53599H1.84Z"
                fill="#F65D7C"
              />
            </svg>
          </p>
          <input
            class="address-input"
            type="tel"
            formControlName="notificationNumber"
            placeholder="+49 176 XXX XX XX"
            [class.invalid]="
              appointmentForm.get('notificationNumber')?.invalid &&
              formSubmitted
            "
          />
          @if (appointmentForm.get('notificationNumber')?.invalid &&
          formSubmitted) {
          <p class="error-message">
              Bitte gib eine gültige Mobilfunknummer ein
          </p>
          }
        </div>
        } @else if (this.appointmentForm.get('notificationMethod')?.value ===
        'phone') {
        <div class="address-container">
          <p class="address-title">
            Telefonnummer
            <svg
              width="6"
              height="6"
              viewBox="0 0 6 6"
              fill="none"
              xmlns="http://www.w3.org/2000/svg"
            >
              <path
                d="M1.84 5.53599L2.048 3.80799L1.024 4.57599C0.938667 4.65066 0.853333 4.68799 0.768 4.68799C0.650667 4.68799 0.554667 4.61866 0.48 4.47999L0 3.67999L1.552 3.00799L0.384 2.49599C0.224 2.41066 0.144 2.30399 0.144 2.17599C0.144 2.10132 0.165333 2.02666 0.208 1.95199L0.704 1.16799L2.048 2.19199L1.888 0.879989C1.86667 0.741323 1.888 0.639989 1.952 0.575989C2.016 0.501322 2.11733 0.463989 2.256 0.463989H3.264L3.072 2.19199L4.08 1.40799C4.15467 1.33332 4.23467 1.29599 4.32 1.29599C4.43733 1.29599 4.53867 1.36532 4.624 1.50399L5.12 2.31999L3.552 3.00799L4.736 3.51999C4.896 3.59466 4.976 3.70132 4.976 3.83999C4.976 3.90399 4.95467 3.97332 4.912 4.04799L4.4 4.83199L3.072 3.80799L3.216 5.11999C3.22667 5.25866 3.2 5.36532 3.136 5.43999C3.072 5.50399 2.976 5.53599 2.848 5.53599H1.84Z"
                fill="#F65D7C"
              />
            </svg>
          </p>
          <input
            class="address-input"
            type="tel"
            formControlName="notificationNumber"
            placeholder="+49 XXX XXX XX XX"
            [class.invalid]="
              appointmentForm.get('notificationNumber')?.invalid &&
              formSubmitted
            "
          />
          @if (appointmentForm.get('notificationNumber')?.invalid &&
          formSubmitted) {
          <p class="error-message">
              Bitte gib eine gültige Telefonnummer ein
          </p>
          }
        </div>
        }
      </div>
    </div>
  </div>
  }

  <div class="cta">
    <button class="btn-back" (click)="goBackInside()">
      <svg
        width="20"
        height="20"
        viewBox="0 0 20 20"
        fill="none"
        xmlns="http://www.w3.org/2000/svg"
      >
        <path
          fill-rule="evenodd"
          clip-rule="evenodd"
          d="M13.6754 3.62063C13.9073 3.9082 13.8841 4.30902 13.6059 4.57393L7.646 10.25L13.6059 15.9262C13.9094 16.2151 13.9094 16.6659 13.6059 16.9549C13.4618 17.0922 13.2759 17.1667 13.0835 17.1667C12.8911 17.1667 12.7052 17.0922 12.5611 16.9549L6.06108 10.7644C5.75763 10.4754 5.75763 10.0247 6.06108 9.73567L12.5611 3.5452C12.8576 3.26277 13.3094 3.26277 13.6059 3.5452L13.6754 3.62063Z"
          fill="#1F516C"
        />
      </svg>
      <span>Zurück</span>
    </button>
    @if (this.booking.selectedService !== serviceOptions.remoteService) {
    <button class="btn-next" (click)="goNext()">
      <span>Weiter zur Übersicht</span>
    </button>
    }
  </div>

  }
</div>
